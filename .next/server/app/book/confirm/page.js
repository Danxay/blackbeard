(()=>{var e={};e.id=237,e.ids=[237],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},7613:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(260),a=s(8203),i=s(5155),l=s.n(i),n=s(7292),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["book",{children:["confirm",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6621)),"C:\\projects\\vibecode\\blackbeard\\app\\book\\confirm\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,9611)),"C:\\projects\\vibecode\\blackbeard\\app\\layout.tsx"],template:[()=>Promise.resolve().then(s.bind(s,4211)),"C:\\projects\\vibecode\\blackbeard\\app\\template.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\projects\\vibecode\\blackbeard\\app\\book\\confirm\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/book/confirm/page",pathname:"/book/confirm",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6276:(e,t,s)=>{Promise.resolve().then(s.bind(s,6621))},2660:(e,t,s)=>{Promise.resolve().then(s.bind(s,6607))},6607:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(5512),a=s(7929),i=s(7798),l=s(5954),n=s(5723),o=s(4643),d=s(1238),c=s(5907);let x=(0,s(1680).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var m=s(6008),p=s(2920),u=s(3946),h=s(9334),b=s(8009);async function j(e,t={}){let s={"Content-Type":"application/json",...t.headers},r=await fetch(`http://localhost:8000/api${e}`,{...t,headers:s});if(!r.ok)throw Error(`API Error: ${r.status}`);return r.json()}let y={createBooking:e=>j("/bookings",{method:"POST",body:JSON.stringify(e)})};var f=s(324);function v(){let e=(0,h.useRouter)(),{isTelegram:t}=(0,f.j)(),[s,j]=(0,b.useState)(!1),[v,g]=(0,b.useState)(null),{selectedBarber:k,selectedServices:w,selectedDate:N,selectedTime:A,getTotalPrice:C,getTotalDuration:P}=(0,p.m)(),_=C(),M=P();if(!k||0===w.length)return null;let T=N?N.toLocaleDateString("ru",{day:"numeric",month:"short",weekday:"short"}):"",S=async()=>{if(N&&A&&k){j(!0),g(null);try{if(t){let e=N.toISOString().split("T")[0];await y.createBooking({barber_id:k.id,service_ids:w.map(e=>e.id),date:e,time:A})}e.push("/success")}catch(e){console.error("Booking error:",e),g("Ошибка при создании записи. Попробуйте ещё раз."),j(!1)}}};return(0,r.jsxs)("main",{className:"min-h-screen bg-bg",children:[(0,r.jsx)(a.A,{title:"Подтверждение"}),(0,r.jsxs)("div",{className:"p-4 pb-44 space-y-4",children:[(0,r.jsxs)("div",{className:"bg-bg-card rounded-2xl border border-border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-text-muted text-xs mb-3",children:[(0,r.jsx)(i.A,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:"Мастер"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("img",{src:k.image,alt:k.name,className:"w-12 h-12 rounded-xl object-cover"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:k.name}),(0,r.jsx)("p",{className:"text-text-muted text-sm",children:k.role})]})]})]}),(0,r.jsxs)("div",{className:"bg-bg-card rounded-2xl border border-border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-text-muted text-xs mb-3",children:[(0,r.jsx)(l.A,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:"Услуги"})]}),(0,r.jsx)("div",{className:"space-y-3",children:w.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white text-sm",children:e.name}),(0,r.jsxs)("p",{className:"text-text-muted text-xs",children:[e.duration," мин"]})]}),(0,r.jsxs)("p",{className:"text-white font-medium",children:[e.price," ₽"]})]},e.id))})]}),(0,r.jsx)("div",{className:"bg-bg-card rounded-2xl border border-border p-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-text-muted text-xs mb-2",children:[(0,r.jsx)(n.A,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:"Дата"})]}),(0,r.jsx)("p",{className:"text-white font-medium",children:T})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-text-muted text-xs mb-2",children:[(0,r.jsx)(o.A,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:"Время"})]}),(0,r.jsx)("p",{className:"text-white font-medium",children:A})]})]})}),(0,r.jsx)(m.default,{href:"/location",className:"block bg-bg-card rounded-2xl border border-border p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-xl bg-bg-elevated flex items-center justify-center",children:(0,r.jsx)(d.A,{className:"w-5 h-5 text-text-secondary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:u.DH.name}),(0,r.jsx)("p",{className:"text-text-muted text-sm",children:u.DH.address.short})]})]}),(0,r.jsx)(c.A,{className:"w-4 h-4 text-text-muted"})]})}),v&&(0,r.jsx)("div",{className:"p-3 bg-error/10 border border-error/20 rounded-xl",children:(0,r.jsx)("p",{className:"text-error text-sm text-center",children:v})})]}),(0,r.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 p-4 pb-6 glass border-t border-border",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3 px-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-text-muted text-xs",children:"Итого"}),(0,r.jsxs)("p",{className:"text-text-secondary text-sm flex items-center gap-1",children:[(0,r.jsx)(o.A,{className:"w-3.5 h-3.5"}),M," мин"]})]}),(0,r.jsxs)("p",{className:"text-white text-2xl font-semibold",children:[_," ₽"]})]}),(0,r.jsxs)("button",{onClick:S,disabled:s,className:"flex items-center justify-between w-full bg-white text-black py-4 px-6 rounded-2xl font-semibold active:scale-[0.98] transition-transform disabled:opacity-50",children:[(0,r.jsx)("span",{children:s?"Создание записи...":"Подтвердить"}),s?(0,r.jsx)(x,{className:"w-5 h-5 animate-spin"}):(0,r.jsx)(c.A,{className:"w-5 h-5"})]}),(0,r.jsx)("p",{className:"text-text-muted text-xs text-center mt-3",children:"Оплата на месте \xb7 Отмена за 2 часа бесплатно"})]})]})}},7929:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(5512),a=s(9334);let i=(0,s(1680).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function l({title:e,showBack:t=!0}){let s=(0,a.useRouter)();return(0,r.jsx)("header",{className:"sticky top-0 z-40 glass border-b border-border",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-14 px-4",children:[t?(0,r.jsx)("button",{onClick:()=>s.back(),className:"flex items-center justify-center w-10 h-10 -ml-2 rounded-full hover:bg-bg-hover text-white transition-colors",children:(0,r.jsx)(i,{className:"w-5 h-5"})}):(0,r.jsx)("div",{className:"w-10"}),(0,r.jsx)("h1",{className:"text-base font-semibold text-white tracking-tight",children:e}),(0,r.jsx)("div",{className:"w-10"})]})})}},3946:(e,t,s)=>{"use strict";s.d(t,{DH:()=>r,TF:()=>a,VZ:()=>i,Wk:()=>l});let r={name:"Black Beard",tagline:"Премиум барбершоп",address:{street:"ул. Тверская, 15",city:"Москва",metro:"м. Пушкинская",short:"Тверская 15, Пушкинская",full:"Москва, ул. Тверская, 15 (м. Пушкинская)"},phone:"+7 (495) 123-45-67",phoneClean:"+74951234567",workHours:{weekdays:"10:00 - 22:00",saturday:"10:00 - 21:00",sunday:"11:00 - 20:00"},mapsUrl:"https://yandex.ru/maps/-/CDuOzK~V",mapImage:"https://static-maps.yandex.ru/1.x/?ll=37.606628,55.763969&z=16&l=map&size=450,300&pt=37.606628,55.763969,pm2rdm",schedule:[{day:"Понедельник",hours:"10:00 – 22:00",open:"10:00",close:"22:00",isToday:!1},{day:"Вторник",hours:"10:00 – 22:00",open:"10:00",close:"22:00",isToday:!1},{day:"Среда",hours:"10:00 – 22:00",open:"10:00",close:"22:00",isToday:!1},{day:"Четверг",hours:"10:00 – 22:00",open:"10:00",close:"22:00",isToday:!1},{day:"Пятница",hours:"10:00 – 22:00",open:"10:00",close:"22:00",isToday:!1},{day:"Суббота",hours:"10:00 – 21:00",open:"10:00",close:"21:00",isToday:!1},{day:"Воскресенье",hours:"11:00 – 20:00",open:"11:00",close:"20:00",isToday:!1}],social:{instagram:"@blackbeard_moscow",telegram:"@blackbeard_bot",vk:"vk.com/blackbeard_moscow"}};function a(){let e=new Date().getDay(),t=r.schedule[0===e?6:e-1];return{open:t.open,close:t.close,hours:t.hours}}function i(){let e=new Date,t=a(),[s,r]=t.open.split(":").map(Number),[i,l]=t.close.split(":").map(Number),n=60*e.getHours()+e.getMinutes();return n>=60*s+r&&n<60*i+l}function l(e){let t=new Date;return t.setDate(t.getDate()+e),t}},324:(e,t,s)=>{"use strict";s.d(t,{j:()=>a});var r=s(8009);function a(){let[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(null),[i,l]=(0,r.useState)(null),[n,o]=(0,r.useState)(null);return{tg:s,user:i,initData:n,onClose:()=>{s?.close()},isReady:e&&!!s,isTelegram:e&&!!s,isMounted:e}}},5907:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1680).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},5723:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1680).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},4643:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1680).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1238:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1680).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},5954:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1680).A)("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]])},7798:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1680).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9334:(e,t,s)=>{"use strict";var r=s(8686);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},6621:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\projects\\\\vibecode\\\\blackbeard\\\\app\\\\book\\\\confirm\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\projects\\vibecode\\blackbeard\\app\\book\\confirm\\page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[989,357,10,8,234],()=>s(7613));module.exports=r})();