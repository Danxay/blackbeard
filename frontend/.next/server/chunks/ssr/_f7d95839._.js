module.exports=[39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],70106)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},53250,a=>{"use strict";let b=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8001",c=async a=>{let c=await fetch(`${b}${a}`);if(!c.ok)throw Error(`API Error: ${c.status}`);return c.json()};a.s(["api",0,{getServices:()=>c("/api/services"),getPopularServices:()=>c("/api/services/popular"),getBarbers:()=>c("/api/barbers"),getBarber:a=>c(`/api/barbers/${a}`),createBooking:async a=>{let c=await fetch(`${b}/api/bookings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!c.ok)throw Error(`Booking failed: ${c.status}`);return c.json()},getUserBookings:a=>c(`/api/bookings/user/${a}`),cancelBooking:async a=>{let c=await fetch(`${b}/api/bookings/${a}`,{method:"DELETE"});if(!c.ok)throw Error(`Cancel failed: ${c.status}`)},validateInitData:async a=>{let c=await fetch(`${b}/api/auth/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:a})});if(!c.ok)throw Error("Validation failed");return c.json()}},"fetcher",0,c])},73357,a=>{"use strict";let b,c,d,e;var f,g=a.i(72131);let h=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},i=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>i(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>i(b)(a)}}};var j=a.i(53250);let k={selectedServices:[],selectedBarber:null,selectedDate:null,selectedTime:null,entryPoint:null,isSubmitting:!1},l=(d=(f=(b=(a,b)=>({...k,setServices:b=>a({selectedServices:b}),addService:b=>a(a=>({selectedServices:[...a.selectedServices,b]})),removeService:b=>a(a=>({selectedServices:a.selectedServices.filter(a=>a.id!==b)})),toggleService:a=>{b().selectedServices.some(b=>b.id===a.id)?b().removeService(a.id):b().addService(a)},setBarber:b=>a({selectedBarber:b}),setDate:b=>a({selectedDate:b}),setTime:b=>a({selectedTime:b}),setEntryPoint:b=>a({entryPoint:b}),getTotalPrice:()=>b().selectedServices.reduce((a,b)=>a+b.price,0),getTotalDuration:()=>b().selectedServices.reduce((a,b)=>a+b.duration,0),submitBooking:async()=>{let c=b();if(!c.selectedBarber||!c.selectedDate||!c.selectedTime||0===c.selectedServices.length)return!1;a({isSubmitting:!0});try{return await j.api.createBooking({telegram_id:0,chat_id:0,first_name:"Гость",username:void 0,barber_id:c.selectedBarber.id,service_ids:c.selectedServices.map(a=>a.id),date:c.selectedDate.toISOString().split("T")[0],time:c.selectedTime,total_price:c.getTotalPrice(),total_duration:c.getTotalDuration()}),!0}catch(a){return console.error("Booking error:",a),!1}finally{a({isSubmitting:!1})}},reset:()=>a(k),isServiceSelected:a=>b().selectedServices.some(b=>b.id===a)}),c={name:"booking-storage",partialize:a=>({selectedServices:a.selectedServices,selectedBarber:a.selectedBarber})},(a,d,e)=>{let f,g={storage:function(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var b;let d=a=>null===a?null:JSON.parse(a,void 0),e=null!=(b=c.getItem(a))?b:null;return e instanceof Promise?e.then(d):d(e)},setItem:(a,b)=>c.setItem(a,JSON.stringify(b,void 0)),removeItem:a=>c.removeItem(a)}}(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...c},h=!1,j=0,k=new Set,l=new Set,m=g.storage;if(!m)return b((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),a(...b)},d,e);let n=()=>{let a=g.partialize({...d()});return m.setItem(g.name,{state:a,version:g.version})},o=e.setState;e.setState=(a,b)=>(o(a,b),n());let p=b((...b)=>(a(...b),n()),d,e);e.getInitialState=()=>p;let q=()=>{var b,c;if(!m)return;let e=++j;h=!1,k.forEach(a=>{var b;return a(null!=(b=d())?b:p)});let o=(null==(c=g.onRehydrateStorage)?void 0:c.call(g,null!=(b=d())?b:p))||void 0;return i(m.getItem.bind(m))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(b=>{var c;if(e!==j)return;let[h,i]=b;if(a(f=g.merge(i,null!=(c=d())?c:p),!0),h)return n()}).then(()=>{e===j&&(null==o||o(f,void 0),f=d(),h=!0,l.forEach(a=>a(f)))}).catch(a=>{e===j&&(null==o||o(void 0,a))})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(m=a.storage)},clearStorage:()=>{null==m||m.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>q(),hasHydrated:()=>h,onHydrate:a=>(k.add(a),()=>{k.delete(a)}),onFinishHydration:a=>(l.add(a),()=>{l.delete(a)})},g.skipHydration||q(),f||p}))?h(f):h,Object.assign(e=a=>(function(a,b=a=>a){let c=g.default.useSyncExternalStore(a.subscribe,g.default.useCallback(()=>b(a.getState()),[a,b]),g.default.useCallback(()=>b(a.getInitialState()),[a,b]));return g.default.useDebugValue(c),c})(d,a),d),e);a.s(["useBookingStore",0,l],73357)}];

//# sourceMappingURL=_f7d95839._.js.map