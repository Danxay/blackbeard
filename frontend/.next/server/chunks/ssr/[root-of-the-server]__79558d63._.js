module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],70106)},98621,a=>{"use strict";a.s(["default",0,function(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}])},59780,a=>{"use strict";var b=a.i(87924),c=a.i(50944);let d=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function e({title:a,showBack:e=!0}){let f=(0,c.useRouter)();return(0,b.jsx)("header",{className:"sticky top-0 z-40 glass border-b border-border",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-14 px-4",children:[e?(0,b.jsx)("button",{onClick:()=>f.back(),className:"flex items-center justify-center w-10 h-10 -ml-2 rounded-full hover:bg-bg-hover text-white transition-colors",children:(0,b.jsx)(d,{className:"w-5 h-5"})}):(0,b.jsx)("div",{className:"w-10"}),(0,b.jsx)("h1",{className:"text-base font-semibold text-white tracking-tight",children:a}),(0,b.jsx)("div",{className:"w-10"})]})})}a.s(["default",()=>e],59780)},33441,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441)},53250,a=>{"use strict";let b=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8001",c=async a=>{let c=await fetch(`${b}${a}`);if(!c.ok)throw Error(`API Error: ${c.status}`);return c.json()};a.s(["api",0,{getServices:()=>c("/api/services"),getPopularServices:()=>c("/api/services/popular"),getBarbers:()=>c("/api/barbers"),getBarber:a=>c(`/api/barbers/${a}`),createBooking:async a=>{let c=await fetch(`${b}/api/bookings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!c.ok)throw Error(`Booking failed: ${c.status}`);return c.json()},getUserBookings:a=>c(`/api/bookings/user/${a}`),cancelBooking:async a=>{let c=await fetch(`${b}/api/bookings/${a}`,{method:"DELETE"});if(!c.ok)throw Error(`Cancel failed: ${c.status}`)},validateInitData:async a=>{let c=await fetch(`${b}/api/auth/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:a})});if(!c.ok)throw Error("Validation failed");return c.json()}},"fetcher",0,c])},73357,a=>{"use strict";let b,c,d;var e=a.i(72131);let f=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},g=a=>{let b=a?f(a):f,c=a=>(function(a,b=a=>a){let c=e.default.useSyncExternalStore(a.subscribe,e.default.useCallback(()=>b(a.getState()),[a,b]),e.default.useCallback(()=>b(a.getInitialState()),[a,b]));return e.default.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},h=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>h(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>h(b)(a)}}};var i=a.i(53250);let j={selectedServices:[],selectedBarber:null,selectedDate:null,selectedTime:null,entryPoint:null,isSubmitting:!1},k=(b?g(b):g)((c=(a,b)=>({...j,setServices:b=>a({selectedServices:b}),addService:b=>a(a=>({selectedServices:[...a.selectedServices,b]})),removeService:b=>a(a=>({selectedServices:a.selectedServices.filter(a=>a.id!==b)})),toggleService:a=>{b().selectedServices.some(b=>b.id===a.id)?b().removeService(a.id):b().addService(a)},setBarber:b=>a({selectedBarber:b}),setDate:b=>a({selectedDate:b}),setTime:b=>a({selectedTime:b}),setEntryPoint:b=>a({entryPoint:b}),getTotalPrice:()=>b().selectedServices.reduce((a,b)=>a+b.price,0),getTotalDuration:()=>b().selectedServices.reduce((a,b)=>a+b.duration,0),submitBooking:async()=>{let c=b();if(!c.selectedBarber||!c.selectedDate||!c.selectedTime||0===c.selectedServices.length)return!1;a({isSubmitting:!0});try{return await i.api.createBooking({telegram_id:0,chat_id:0,first_name:"Гость",username:void 0,barber_id:c.selectedBarber.id,service_ids:c.selectedServices.map(a=>a.id),date:c.selectedDate.toISOString().split("T")[0],time:c.selectedTime,total_price:c.getTotalPrice(),total_duration:c.getTotalDuration()}),!0}catch(a){return console.error("Booking error:",a),!1}finally{a({isSubmitting:!1})}},reset:()=>a(j),isServiceSelected:a=>b().selectedServices.some(b=>b.id===a)}),d={name:"booking-storage",partialize:a=>({selectedServices:a.selectedServices,selectedBarber:a.selectedBarber})},(a,b,e)=>{let f,g={storage:function(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var b;let d=a=>null===a?null:JSON.parse(a,void 0),e=null!=(b=c.getItem(a))?b:null;return e instanceof Promise?e.then(d):d(e)},setItem:(a,b)=>c.setItem(a,JSON.stringify(b,void 0)),removeItem:a=>c.removeItem(a)}}(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...d},i=!1,j=0,k=new Set,l=new Set,m=g.storage;if(!m)return c((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),a(...b)},b,e);let n=()=>{let a=g.partialize({...b()});return m.setItem(g.name,{state:a,version:g.version})},o=e.setState;e.setState=(a,b)=>(o(a,b),n());let p=c((...b)=>(a(...b),n()),b,e);e.getInitialState=()=>p;let q=()=>{var c,d;if(!m)return;let e=++j;i=!1,k.forEach(a=>{var c;return a(null!=(c=b())?c:p)});let o=(null==(d=g.onRehydrateStorage)?void 0:d.call(g,null!=(c=b())?c:p))||void 0;return h(m.getItem.bind(m))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(c=>{var d;if(e!==j)return;let[h,i]=c;if(a(f=g.merge(i,null!=(d=b())?d:p),!0),h)return n()}).then(()=>{e===j&&(null==o||o(f,void 0),f=b(),i=!0,l.forEach(a=>a(f)))}).catch(a=>{e===j&&(null==o||o(void 0,a))})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(m=a.storage)},clearStorage:()=>{null==m||m.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>q(),hasHydrated:()=>i,onHydrate:a=>(k.add(a),()=>{k.delete(a)}),onFinishHydration:a=>(l.add(a),()=>{l.delete(a)})},g.skipHydration||q(),f||p}));a.s(["useBookingStore",0,k],73357)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},21374,a=>{"use strict";let b=(0,a.i(70106).default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>b],21374)},50522,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>b],50522)},79603,a=>{"use strict";var b=a.i(72596),c=a.i(53250);function d(){let{data:a,error:d,isLoading:e,mutate:f}=(0,b.default)("/api/barbers",a=>(0,c.fetcher)(a),{revalidateOnFocus:!1,dedupingInterval:6e4});return{barbers:a||[],isLoading:e,isError:d,mutate:f}}a.s(["useBarbers",()=>d])},29957,a=>{"use strict";var b=a.i(87924),c=a.i(59780),d=a.i(38246),e=a.i(71987),f=a.i(21374),g=a.i(50522),h=a.i(33441),i=a.i(96221),j=a.i(98621),k=a.i(79603),l=a.i(73357),m=a.i(72131);function n(){let{barbers:a,isLoading:n}=(0,k.useBarbers)(),{selectedBarber:o,setBarber:p,setEntryPoint:q,selectedServices:r,entryPoint:s}=(0,l.useBookingStore)();(0,m.useEffect)(()=>{0!==r.length||s||q("barber")},[r.length,s,q]);let t=r.length>0?"/book/date":"/services",u=r.length>0?"Выбрать время":"Выбрать услуги";return n?(0,b.jsxs)("main",{className:"min-h-screen bg-bg",children:[(0,b.jsx)(c.default,{title:"Выберите мастера"}),(0,b.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,b.jsx)(i.Loader2,{className:"w-8 h-8 text-text-muted animate-spin"})})]}):(0,b.jsxs)("main",{className:"min-h-screen bg-bg",children:[(0,b.jsx)(c.default,{title:"Выберите мастера"}),(0,b.jsx)("div",{className:"p-4 pb-32 space-y-2",children:a.map(a=>{let c=o?.id===a.id,d=a.is_available;return(0,b.jsxs)("div",{onClick:()=>d&&p(a),className:(0,j.default)("flex items-center gap-4 p-4 rounded-2xl border transition-all",!d&&"opacity-50 cursor-not-allowed",d&&"cursor-pointer active:scale-[0.99]",c?"bg-white/5 border-white/30":"bg-bg-card border-border"),children:[(0,b.jsxs)("div",{className:"relative w-14 h-14 flex-shrink-0",children:[(0,b.jsx)(e.default,{src:a.image||"/placeholder.jpg",alt:a.name,fill:!0,className:"object-cover rounded-xl",unoptimized:!0}),!d&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black/60 rounded-xl flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-[9px] text-white font-medium",children:"Выходной"})})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("h3",{className:"text-white font-medium truncate",children:a.name})}),(0,b.jsx)("p",{className:"text-text-muted text-sm",children:a.role}),(0,b.jsx)("p",{className:"text-text-muted text-xs mt-1",children:a.experience})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(f.Star,{className:"w-3.5 h-3.5 text-white fill-white"}),(0,b.jsx)("span",{className:"text-white font-medium",children:a.rating})]}),d&&(0,b.jsx)("div",{className:(0,j.default)("w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all",c?"bg-white border-white":"border-text-muted"),children:c&&(0,b.jsx)(h.Check,{className:"w-4 h-4 text-black",strokeWidth:3})})]})]},a.id)})}),(0,b.jsx)("div",{className:"fixed bottom-0 left-0 right-0 p-4 pb-6 glass border-t border-border",children:(0,b.jsxs)(d.default,{href:o?t:"#",className:(0,j.default)("flex items-center justify-between w-full py-4 px-6 rounded-2xl font-semibold transition-all",o?"bg-white text-black active:scale-[0.98]":"bg-bg-card text-text-muted cursor-not-allowed"),onClick:a=>!o&&a.preventDefault(),children:[(0,b.jsx)("span",{children:o?u:"Выберите мастера"}),(0,b.jsx)(g.ChevronRight,{className:"w-5 h-5"})]})})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__79558d63._.js.map