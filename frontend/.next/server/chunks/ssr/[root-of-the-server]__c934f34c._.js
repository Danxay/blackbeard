module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},59780,a=>{"use strict";var b=a.i(87924),c=a.i(50944);let d=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function e({title:a,showBack:e=!0}){let f=(0,c.useRouter)();return(0,b.jsx)("header",{className:"sticky top-0 z-40 glass border-b border-border",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-14 px-4",children:[e?(0,b.jsx)("button",{onClick:()=>f.back(),className:"flex items-center justify-center w-10 h-10 -ml-2 rounded-full hover:bg-bg-hover text-white transition-colors",children:(0,b.jsx)(d,{className:"w-5 h-5"})}):(0,b.jsx)("div",{className:"w-10"}),(0,b.jsx)("h1",{className:"text-base font-semibold text-white tracking-tight",children:a}),(0,b.jsx)("div",{className:"w-10"})]})})}a.s(["default",()=>e],59780)},19251,a=>{"use strict";var b=a.i(72131);function c(){return null}function d(){return null}function e(){return()=>{}}function f(){let a=(0,b.useSyncExternalStore)(e,d,c),f=(0,b.useRef)(!1);(0,b.useEffect)(()=>{if(a&&!f.current){f.current=!0,a.ready();try{a.expand()}catch(a){console.warn("Failed to expand WebApp:",a)}try{a.setHeaderColor("#221e10"),a.setBackgroundColor("#221e10")}catch(a){console.warn("Failed to set colors:",a)}}},[a]);let g=a?.initDataUnsafe?.user||null;return{tg:a,user:g,onClose:()=>{a?.close()},isReady:!!a,isMounted:!1}}a.s(["useTelegram",()=>f])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},32860,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],32860)},51933,a=>{"use strict";let b=(0,a.i(70106).default)("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);a.s(["Scissors",()=>b],51933)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},86671,a=>{"use strict";let b={name:"Black Beard",tagline:"Премиум барбершоп",address:{street:"Невский просп., 28",city:"Санкт-Петербург",metro:"м. Гостиный двор",short:"Невский 28, Гостиный двор",full:"Санкт-Петербург, Невский просп., 28 (м. Гостиный двор)"},phone:"+7 (812) 309-28-50",phoneClean:"+78123092850",workHours:{weekdays:"10:00 - 22:00",saturday:"10:00 - 21:00",sunday:"11:00 - 20:00"},mapsUrl:"https://yandex.ru/maps/-/CHAdnM~g",mapImage:"https://static-maps.yandex.ru/1.x/?ll=30.329899,59.935493&z=16&l=map&size=450,300&pt=30.329899,59.935493,pm2rdm",schedule:[{day:"Понедельник",hours:"10:00 – 22:00",open:"10:00",close:"22:00",isToday:!1},{day:"Вторник",hours:"10:00 – 22:00",open:"10:00",close:"22:00",isToday:!1},{day:"Среда",hours:"10:00 – 22:00",open:"10:00",close:"22:00",isToday:!1},{day:"Четверг",hours:"10:00 – 22:00",open:"10:00",close:"22:00",isToday:!1},{day:"Пятница",hours:"10:00 – 22:00",open:"10:00",close:"22:00",isToday:!1},{day:"Суббота",hours:"10:00 – 21:00",open:"10:00",close:"21:00",isToday:!1},{day:"Воскресенье",hours:"11:00 – 20:00",open:"11:00",close:"20:00",isToday:!1}],social:{instagram:"@blackbeard_spb",telegram:"@blackbeard_spb_bot",vk:"vk.com/blackbeard_spb"}};function c(){let a=new Date().getDay(),c=b.schedule[0===a?6:a-1];return{open:c.open,close:c.close,hours:c.hours}}function d(){let a=new Date,b=c(),[d,e]=b.open.split(":").map(Number),[f,g]=b.close.split(":").map(Number),h=60*a.getHours()+a.getMinutes();return h>=60*d+e&&h<60*f+g}a.s(["getTodaySchedule",()=>c,"isOpenNow",()=>d,"shopInfo",0,b])},24987,a=>{"use strict";let b=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},46842,a=>{"use strict";let b=(0,a.i(70106).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},7674,a=>{"use strict";var b=a.i(87924),c=a.i(59780),d=a.i(71987),e=a.i(41675),f=a.i(41710),g=a.i(24987),h=a.i(32860),i=a.i(46842),j=a.i(51933),k=a.i(96221),l=a.i(38246),m=a.i(73357),n=a.i(86671),o=a.i(50944),p=a.i(72131),q=a.i(53250),r=a.i(19251);function s(){let a=(0,o.useRouter)(),{user:s}=(0,r.useTelegram)(),[t,u]=(0,p.useState)(!1),[v,w]=(0,p.useState)(null),{selectedBarber:x,selectedServices:y,selectedDate:z,selectedTime:A,getTotalPrice:B,getTotalDuration:C}=(0,m.useBookingStore)(),D=B(),E=C();(0,p.useEffect)(()=>{x&&0!==y.length&&A||a.push("/services")},[x,y.length,A,a]);let F=async()=>{if(!x||!z||!A||!s)return void w("Не все данные заполнены");u(!0),w(null);try{await q.api.createBooking({telegram_id:s.id,chat_id:s.id,first_name:s.first_name,username:s.username,barber_id:x.id,service_ids:y.map(a=>a.id),date:z.toISOString().split("T")[0],time:A,total_price:D,total_duration:E}),a.push("/success")}catch(a){console.error("Booking error:",a),w("Не удалось создать запись. Попробуйте ещё раз.")}finally{u(!1)}};if(!x||0===y.length)return null;let G=z?z.toLocaleDateString("ru",{day:"numeric",month:"short",weekday:"short"}):"";return(0,b.jsxs)("main",{className:"min-h-screen bg-bg",children:[(0,b.jsx)(c.default,{title:"Подтверждение"}),(0,b.jsxs)("div",{className:"p-4 pb-44 space-y-4",children:[(0,b.jsxs)("div",{className:"bg-bg-card rounded-2xl border border-border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-text-muted text-xs mb-3",children:[(0,b.jsx)(i.User,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:"Мастер"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"relative w-12 h-12 flex-shrink-0",children:(0,b.jsx)(d.default,{src:x.image||"/placeholder.jpg",alt:x.name,fill:!0,className:"object-cover rounded-xl",unoptimized:!0})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-white font-medium",children:x.name}),(0,b.jsx)("p",{className:"text-text-muted text-sm",children:x.role})]})]})]}),(0,b.jsxs)("div",{className:"bg-bg-card rounded-2xl border border-border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-text-muted text-xs mb-3",children:[(0,b.jsx)(j.Scissors,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:"Услуги"})]}),(0,b.jsx)("div",{className:"space-y-3",children:y.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-white text-sm",children:a.name}),(0,b.jsxs)("p",{className:"text-text-muted text-xs",children:[a.duration," мин"]})]}),(0,b.jsxs)("p",{className:"text-white font-medium",children:[a.price," ₽"]})]},a.id))})]}),(0,b.jsx)("div",{className:"bg-bg-card rounded-2xl border border-border p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-text-muted text-xs mb-2",children:[(0,b.jsx)(e.Calendar,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:"Дата"})]}),(0,b.jsx)("p",{className:"text-white font-medium",children:G})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-text-muted text-xs mb-2",children:[(0,b.jsx)(f.Clock,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:"Время"})]}),(0,b.jsx)("p",{className:"text-white font-medium",children:A})]})]})}),(0,b.jsx)(l.default,{href:"/location",className:"block bg-bg-card rounded-2xl border border-border p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-bg-elevated flex items-center justify-center",children:(0,b.jsx)(g.MapPin,{className:"w-5 h-5 text-text-secondary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-white font-medium",children:n.shopInfo.name}),(0,b.jsx)("p",{className:"text-text-muted text-sm",children:n.shopInfo.address.short})]})]}),(0,b.jsx)(h.ArrowRight,{className:"w-4 h-4 text-text-muted"})]})}),v&&(0,b.jsx)("div",{className:"bg-error/10 border border-error/30 rounded-xl p-3 text-error text-sm text-center",children:v})]}),(0,b.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 p-4 pb-6 glass border-t border-border",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3 px-1",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-text-muted text-xs",children:"Итого"}),(0,b.jsxs)("p",{className:"text-text-secondary text-sm flex items-center gap-1",children:[(0,b.jsx)(f.Clock,{className:"w-3.5 h-3.5"}),E," мин"]})]}),(0,b.jsxs)("p",{className:"text-white text-2xl font-semibold",children:[D," ₽"]})]}),(0,b.jsx)("button",{onClick:F,disabled:t,className:"flex items-center justify-center gap-2 w-full bg-white text-black py-4 px-6 rounded-2xl font-semibold active:scale-[0.98] transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Loader2,{className:"w-5 h-5 animate-spin"}),(0,b.jsx)("span",{children:"Бронирование..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"Подтвердить"}),(0,b.jsx)(h.ArrowRight,{className:"w-5 h-5"})]})}),(0,b.jsx)("p",{className:"text-text-muted text-xs text-center mt-3",children:"Оплата на месте · Отмена за 2 часа бесплатно"})]})]})}a.s(["default",()=>s])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c934f34c._.js.map