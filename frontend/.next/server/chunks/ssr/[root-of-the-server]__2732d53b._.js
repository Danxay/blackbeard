module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},98621,a=>{"use strict";a.s(["default",0,function(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}])},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],70106)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},53250,a=>{"use strict";let b=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8001",c=async a=>{let c=await fetch(`${b}${a}`);if(!c.ok)throw Error(`API Error: ${c.status}`);return c.json()};a.s(["api",0,{getServices:()=>c("/api/services"),getPopularServices:()=>c("/api/services/popular"),getBarbers:()=>c("/api/barbers"),getBarber:a=>c(`/api/barbers/${a}`),createBooking:async a=>{let c=await fetch(`${b}/api/bookings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!c.ok)throw Error(`Booking failed: ${c.status}`);return c.json()},getUserBookings:a=>c(`/api/bookings/user/${a}`),cancelBooking:async a=>{let c=await fetch(`${b}/api/bookings/${a}`,{method:"DELETE"});if(!c.ok)throw Error(`Cancel failed: ${c.status}`)},validateInitData:async a=>{let c=await fetch(`${b}/api/auth/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({init_data:a})});if(!c.ok)throw Error("Validation failed");return c.json()}},"fetcher",0,c])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},19251,a=>{"use strict";var b=a.i(72131);function c(){return null}function d(){return null}function e(){return()=>{}}function f(){let a=(0,b.useSyncExternalStore)(e,d,c),f=(0,b.useRef)(!1);(0,b.useEffect)(()=>{if(a&&!f.current){f.current=!0,a.ready();try{a.expand()}catch(a){console.warn("Failed to expand WebApp:",a)}try{a.setHeaderColor("#221e10"),a.setBackgroundColor("#221e10")}catch(a){console.warn("Failed to set colors:",a)}}},[a]);let g=a?.initDataUnsafe?.user||null;return{tg:a,user:g,onClose:()=>{a?.close()},isReady:!!a,isMounted:!1}}a.s(["useTelegram",()=>f])},81010,a=>{"use strict";let b=(0,a.i(70106).default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);a.s(["Home",()=>b],81010)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},46842,a=>{"use strict";let b=(0,a.i(70106).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},91936,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(50944),e=a.i(81010),f=a.i(41675),g=a.i(46842),h=a.i(98621);let i=[{href:"/",icon:e.Home,label:"Главная"},{href:"/bookings",icon:f.Calendar,label:"Записи"},{href:"/profile",icon:g.User,label:"Профиль"}];function j(){let a=(0,d.usePathname)();return(0,b.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 glass border-t border-border safe-bottom",children:(0,b.jsx)("div",{className:"flex items-center justify-around h-16 max-w-lg mx-auto",children:i.map(d=>{let e=a===d.href;return(0,b.jsxs)(c.default,{href:d.href,className:(0,h.default)("flex flex-col items-center justify-center w-20 h-full transition-all",e?"text-white":"text-text-muted hover:text-text-secondary"),children:[(0,b.jsx)(d.icon,{className:(0,h.default)("w-5 h-5 mb-1 transition-transform",e&&"scale-110"),strokeWidth:e?2.5:2}),(0,b.jsx)("span",{className:(0,h.default)("text-[10px] font-medium tracking-wide",e&&"font-semibold"),children:d.label}),e&&(0,b.jsx)("div",{className:"absolute top-0 w-12 h-0.5 bg-white rounded-full"})]},d.href)})})})}a.s(["default",()=>j])},95157,a=>{"use strict";var b=a.i(87924),c=a.i(91936),d=a.i(72131),e=a.i(98621),f=a.i(41675),g=a.i(70106);let h=(0,g.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),i=(0,g.default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var j=a.i(41710),k=a.i(96221),l=a.i(38246),m=a.i(72596),n=a.i(53250),o=a.i(19251);function p(){let{bookings:a,isLoading:g,cancelBooking:p}=function(){let{user:a}=(0,o.useTelegram)(),b=a?.id,{data:c,error:d,isLoading:e,mutate:f}=(0,m.default)(b?`/api/bookings/user/${b}`:null,a=>(0,n.fetcher)(a),{revalidateOnFocus:!0,dedupingInterval:3e4}),g=async a=>{try{return await n.api.cancelBooking(a),f(),!0}catch(a){return console.error("Cancel booking error:",a),!1}};return{bookings:c||[],isLoading:e,isError:d,mutate:f,cancelBooking:g}}(),[q,r]=(0,d.useState)("upcoming"),[s,t]=(0,d.useState)(!1),[u,v]=(0,d.useState)(null),[w,x]=(0,d.useState)(!1),y=new Date,z=a.filter(a=>new Date(a.date)>=y&&"cancelled"!==a.status),A=a.filter(a=>new Date(a.date)<y||"cancelled"===a.status),B=async()=>{u&&(x(!0),await p(u),x(!1),t(!1))},C=a=>{let b=new Date(a);return{weekday:b.toLocaleDateString("ru-RU",{weekday:"long"}),dayMonth:b.toLocaleDateString("ru-RU",{day:"numeric",month:"short"}),month:b.toLocaleDateString("ru-RU",{month:"short"}),day:b.getDate()}};return g?(0,b.jsxs)("main",{className:"min-h-screen bg-bg pb-24",children:[(0,b.jsx)("div",{className:"sticky top-0 z-40 glass border-b border-border",children:(0,b.jsx)("div",{className:"flex items-center justify-between h-14 px-4",children:(0,b.jsx)("h1",{className:"text-base font-semibold text-white",children:"Записи"})})}),(0,b.jsx)("div",{className:"flex items-center justify-center h-[60vh]",children:(0,b.jsx)(k.Loader2,{className:"w-8 h-8 text-text-muted animate-spin"})}),(0,b.jsx)(c.default,{})]}):(0,b.jsxs)("main",{className:"min-h-screen bg-bg pb-24",children:[(0,b.jsxs)("div",{className:"sticky top-0 z-40 glass border-b border-border",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between h-14 px-4",children:[(0,b.jsx)("h1",{className:"text-base font-semibold text-white",children:"Записи"}),(0,b.jsxs)(l.default,{href:"/services",className:"flex items-center gap-1 text-text-secondary text-sm",children:[(0,b.jsx)(h,{className:"w-4 h-4"}),"Новая"]})]}),(0,b.jsxs)("div",{className:"flex p-1 mx-4 mb-4 bg-bg-card rounded-xl",children:[(0,b.jsx)("button",{onClick:()=>r("upcoming"),className:(0,e.default)("flex-1 py-2 text-sm font-medium rounded-lg transition-colors","upcoming"===q?"bg-white text-black":"text-text-secondary"),children:"Предстоящие"}),(0,b.jsx)("button",{onClick:()=>r("history"),className:(0,e.default)("flex-1 py-2 text-sm font-medium rounded-lg transition-colors","history"===q?"bg-white text-black":"text-text-secondary"),children:"История"})]})]}),(0,b.jsxs)("div",{className:"p-4 space-y-4",children:["upcoming"===q&&(0,b.jsx)(b.Fragment,{children:0===z.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(f.Calendar,{className:"w-12 h-12 text-text-muted mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-text-secondary mb-4",children:"Нет предстоящих записей"}),(0,b.jsxs)(l.default,{href:"/services",className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-black font-semibold rounded-xl",children:[(0,b.jsx)(h,{className:"w-4 h-4"}),"Записаться"]})]}):z.map(a=>{let c=C(a.date),d=a.total_price,e=a.total_duration;return(0,b.jsxs)("div",{className:"bg-bg-card rounded-2xl border border-border overflow-hidden",children:[(0,b.jsx)("div",{className:"p-4 border-b border-border",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-text-muted text-xs uppercase tracking-wide",children:c.weekday}),(0,b.jsxs)("p",{className:"text-white text-xl font-semibold mt-0.5",children:[c.dayMonth,", ",a.time]})]}),(0,b.jsx)("div",{className:"px-2 py-1 bg-success/10 text-success text-xs font-medium rounded",children:"Подтверждено"})]})}),(0,b.jsx)("div",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("img",{src:a.barber.image||"/placeholder.jpg",alt:a.barber.name,className:"w-12 h-12 rounded-xl object-cover"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-white font-medium truncate",children:a.barber.name}),(0,b.jsx)("p",{className:"text-text-secondary text-sm truncate",children:a.services.map(a=>a.name).join(", ")}),(0,b.jsxs)("p",{className:"text-text-muted text-xs flex items-center gap-1 mt-1",children:[(0,b.jsx)(j.Clock,{className:"w-3 h-3"}),e," мин"]})]}),(0,b.jsxs)("p",{className:"text-white font-semibold",children:[d," ₽"]})]})}),(0,b.jsxs)("div",{className:"flex border-t border-border",children:[(0,b.jsx)("button",{onClick:()=>{v(a.id),t(!0)},className:"flex-1 py-4 text-error text-sm font-medium border-r border-border active:bg-error/5",children:"Отменить"}),(0,b.jsx)(l.default,{href:"/book/date",className:"flex-1 py-4 text-white text-sm font-medium text-center active:bg-white/5",children:"Перенести"})]})]},a.id)})}),"history"===q&&(0,b.jsx)("div",{className:"space-y-2",children:0===A.length?(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-text-secondary",children:"История пуста"})}):A.map(a=>{let c=C(a.date);return(0,b.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-bg-card rounded-2xl border border-border",children:[(0,b.jsxs)("div",{className:"w-12 h-12 rounded-xl bg-bg-elevated flex flex-col items-center justify-center",children:[(0,b.jsx)("span",{className:"text-[10px] text-text-muted uppercase",children:c.month}),(0,b.jsx)("span",{className:"text-white font-semibold",children:c.day})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-white font-medium truncate",children:a.services.map(a=>a.name).join(", ")}),(0,b.jsx)("p",{className:"text-text-muted text-sm",children:a.barber.name})]}),(0,b.jsx)(l.default,{href:"/services",className:"text-accent text-sm font-medium",children:"Повторить"})]},a.id)})})]}),s&&(0,b.jsx)("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-black/60",onClick:()=>t(!1),children:(0,b.jsxs)("div",{className:"bg-bg-card rounded-t-3xl w-full max-w-lg border-t border-border animate-slide-up p-6",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"text-center mb-6",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-error/10 flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(i,{className:"w-6 h-6 text-error"})}),(0,b.jsx)("h3",{className:"text-white font-semibold text-lg mb-2",children:"Отменить запись?"}),(0,b.jsx)("p",{className:"text-text-secondary text-sm",children:"Это действие нельзя отменить"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>t(!1),className:"flex-1 py-4 bg-bg-elevated text-white font-medium rounded-2xl",disabled:w,children:"Назад"}),(0,b.jsx)("button",{onClick:B,className:"flex-1 py-4 bg-error text-white font-medium rounded-2xl flex items-center justify-center gap-2",disabled:w,children:w?(0,b.jsx)(k.Loader2,{className:"w-5 h-5 animate-spin"}):"Отменить"})]})]})}),(0,b.jsx)(c.default,{})]})}a.s(["default",()=>p],95157)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2732d53b._.js.map